<div class="main-content-container container-fluid px-4">

    <flash-messages class="bg-accent text-center"></flash-messages>

    <div class="row justify-content-center">
        <div class="col-12">
            <div class="content-loading text-center" *ngIf="loading">
                <app-loadingcircle></app-loadingcircle>
            </div>
        </div>
    </div>

    <!------------------------------------------Community Menu--------------------------------------------->

    <div class="row  pb-1 pt-4">
        <div class="col-12">

            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item align-self-center">
                    <h5 class="text-dark mb-0 font-weight-bold mr-3">Community</h5>
                </li>
                <li class="nav-item">
                    <a routerLink="/profile" class="nav-link text-muted font-weight-bold" aria-controls="profile"
                        aria-selected="false">MY PROFILE</a>
                </li>
                <li class="nav-item">
                    <a routerLink="/newsfeed" class="nav-link text-muted font-weight-bold" role="tab"
                        aria-controls="contact" aria-selected="false">NEWS FEED</a>
                </li>
                <li class="nav-item">
                    <a routerLink="/discussions" class="active nav-link text-muted font-weight-bold" role="tab"
                        aria-controls="contact" aria-selected="false">DISCUSSIONS</a>
                </li>
                <li class="nav-item">
                    <a routerLink="/messages" class="nav-link text-muted font-weight-bold" role="tab"
                        aria-controls="contact" aria-selected="false">MESSAGES</a>
                </li>
                <li class="nav-item">
                    <a routerLink="/requests" class="nav-link text-muted font-weight-bold" role="tab"
                        aria-controls="contact" aria-selected="false">REQUESTS</a>
                </li>
                <li class="nav-item">
                    <a routerLink="/index" class="nav-link text-muted font-weight-bold" role="tab"
                        aria-controls="contact" aria-selected="false">SETTINGS</a>
                </li>

                <li class="nav-item pull-right ml-xl-auto align-self-center py-1">
                    <a class="btn btn-accent btn-sm btn-block text-uppercase"
                        (click)="openAskQuestionModal(postQuestionModal)">
                        Ask a Question
                    </a>
                </li>

            </ul>
        </div>
    </div>

    <!----------------------------------------End Community Menu--------------------------------------------->



    <!-----------------------------------------Breadcrumb and search-------------------------------------------->

    <div class="row justify-content-center pb-1 pt-3">
        <div class="col-xl-12">
            <ul class="nav nav-tabs sub-tab border-0">

                <li class="nav-item align-self-center" (click)="setTitle( 'Mvest-Categories')">
                    <a class="align-self-center" routerLink="/discussions">
                        <h5 class=" text-muted mb-0 font-weight-bold mr-3 align-self-center">Categories /</h5>
                    </a>
                </li>


                <li class="nav-item align-self-center">
                    <a class="align-self-center" routerLink="/subcategory" [queryParams]="{subCategoryId:subCategoryId}"
                        (click)="setTitle( 'Mvest-SubCategories' )">
                        <h5 class=" text-muted mb-0 font-weight-bold mr-3 align-self-center">Sub Categories / </h5>
                    </a>
                </li>
                <li class="nav-item align-self-center">
                    <a class="align-self-center">
                        <h5 class=" text-dark mb-0 font-weight-bold mr-3 align-self-center"> Discussions </h5>
                    </a>
                </li>



                <div class="ml-auto d-inline-flex">
                    <li class="nav-item align-self-center ml-auto">
                        <form id="search-form" class="form-inline">
                            <div class="input-group search">
                                <input type="text" class="form-control search-form" [(ngModel)]="searchText"
                                    [ngModelOptions]="{standalone: true}" placeholder="Search">
                                <span class="input-group-btn">
                                    <button type="submit" class="search-btn">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </span>
                            </div>
                        </form>
                    </li>


                </div>
            </ul>

            <!-- <nav aria-label="breadcrumb">
                <ol class="breadcrumb px-0 mb-0">
                    <li class="breadcrumb-item"><a class="text-secondary font-weight-semibold" routerLink="/discussions"
                            (click)="setTitle( 'Mvest-Categories' )">Categories</a></li>
                    <li class="breadcrumb-item"><a class="text-secondary font-weight-semibold" routerLink="/subcategory"
                            [queryParams]="{subCategoryId:subCategoryId}"
                            (click)="setTitle( 'Mvest-SubCategories' )">Sub-Categories</a></li>
                    <li class="breadcrumb-item"><a class="active text-green font-weight-semibold">Discussions</a>
                    </li>

                    <li class="ml-auto">

                        <form id="search-form" class="form-inline" role="form" method="post"
                            action="//www.google.com/search" target="_blank">
                            <div class="input-group search">
                                <input type="text" class="form-control search-form" [(ngModel)]="searchText"
                                    [ngModelOptions]="{standalone: true}" placeholder="Search">
                                <span class="input-group-btn">
                                    <button type="submit" class="search-btn" data-target="#search-form" name="q">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </span>
                            </div>
                        </form>
                    </li>
                </ol>
            </nav> -->

            <!-----------------------------------------End Breadcrumb and search-------------------------------------------->

            <!----------------------------------------- Discussions--------------------------------------------------------->

            <!-- <div class="text-center" *ngIf="loading">
                <div class="spinner-border text-accent" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div> -->

            <div class="row justify-content-between no-gutters pt-3">
                <div class="col-md-12 col-xl-12">
                    <div class="row justify-content-between no-gutters">
                        <div class="col-md-12 col-xl-8 pb-3">
                            <div class="text-left" *ngIf="pageNotFound">
                                <h5>No Records Found...Be the first person to initiate a discussion.</h5>
                            </div>

                            <div class="card card-small blog-comments">
                                <div class="card-body p-0"
                                    *ngFor="let dl of discussionList?.discussions | filter : searchText">
                                    <a routerLink="/discussion-details"
                                        [queryParams]="{discussionDetailsId:dl.doc_id,discussionId:discussionId,subCategoryId:subCategoryId}"
                                        (click)="setTitle( 'Mvest-Discussion Details')">

                                        <div class=" border-bottom p-1">
                                            <div class="row justify-content-center text-left text-break">
                                                <div class="col-9">
                                                    <div class="media p-3">
                                                        <img class="mr-3 user-pic rounded-circle mr-2"
                                                            src="assets/images/avatars/2.jpg"
                                                            alt="Generic placeholder image">

                                                        <div class="media-body mb-0">

                                                            <ul class="list-inline d-flex mb-0">
                                                                <li class="list-inline-item mb-1 h6  text-muted">
                                                                    <h5 class="text-dark h6 mb-0 font-weight-semibold"
                                                                        innerHTML="{{dl?.title | titlecase | highlight:searchText}}">

                                                                    </h5>
                                                                </li>
                                                            </ul>

                                                            <ul class="list-inline mb-0">
                                                                <li class="list-inline-item mb-1 h6  text-muted"
                                                                    innerHTML="{{dl?.post_msg | summary | highlight:searchText}}">
                                                                    <!-- {{dl?.post_msg | summary}} -->


                                                                </li>
                                                                <!-- <li
                                                                    class="list-inline-item mb-1 h6 text-muted text-right">
                                                                    <a *ngIf="dl?.post_msg.length>100" href="#"
                                                                        (click)="readMore()"><u>- read
                                                                            more</u></a>
                                                                </li> -->

                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-3 text-right">
                                                    <div class="media p-3 ">
                                                        <div class="media-body mb-0">


                                                            <span>
                                                                <h6 class="font-weight-semibold small mb-1 text-muted">
                                                                    {{dl?.post_date | timeAgo}}</h6>
                                                            </span>


                                                            <span>
                                                                <h6 class="font-weight-semibold small mb-1 text-muted">
                                                                    -by
                                                                    {{dl?.post_by_name}}</h6>
                                                            </span>

                                                            <!-- <ul class="list-inline d-flex mb-0">
                                                                <li
                                                                    class="list-inline-item mb-1 h6  text-muted ml-auto">
                                                                    <span><small
                                                                            class="font-weight-semibold">{{dl?.post_date | timeAgo}}</small></span>

                                                                </li>
                                                            </ul>

                                                            <ul class="list-inline d-flex mb-0">
                                                                <li
                                                                    class="list-inline-item mb-1 h6   text-muted ml-auto">
                                                                    <span><small class="font-weight-semibold">-by
                                                                            {{dl?.post_by_name}}</small></span>
                                                                </li>
                                                            </ul> -->

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>


                        <!---------------------------------------------------Top Contributors------------------------------------------------------------>

                        <!-- <div class="col-xl-4 pb-3">
                            <div class="col-xl-12 col-md-12 col-sm-12 mb-4 ">
                                <div class="card card-small blog-comments shadow">
                                    <div class="card-header ">
                                        <h6 class="mb-0 text-muted px-3">
                                            Top contributors </h6>
                                    </div>
                                    <div class="card-body pt-0">


                                        <div class="media d-flex align-items-center px-3 pb-4">

                                            <img class="mr-3 user-pic rounded-circle mr-2"
                                                src="assets/images/avatars/2.jpg" alt="Generic placeholder image">
                                            <div class="media-body mb-0">

                                                <div class="">

                                                    <h5 class="text-dark h6 mb-0 font-weight-semibold">John Doe</h5>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="media d-flex align-items-center px-3 pb-4 ">

                                            <img class="mr-3 user-pic rounded-circle mr-2"
                                                src="assets/images/avatars/0.jpg" alt="Generic placeholder image">
                                            <div class="media-body mb-0">

                                                <div class="">

                                                    <h5 class="text-dark h6 mb-0 font-weight-semibold">Sierra Brooks
                                                    </h5>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="media d-flex align-items-center px-3 ">

                                            <img class="mr-3 user-pic rounded-circle mr-2"
                                                src="assets/images/avatars/1.jpg" alt="Generic placeholder image">
                                            <div class="media-body mb-0">

                                                <div class="">
                                                    <h5 class="text-dark h6 mb-0 font-weight-semibold">Tony Stark</h5>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!---------------------------------------------------End Top Contributors------------------------------------------------------------>


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!---------------------------------------------------End Discussions--------------------------------------------------------->


<!---------------------------------------------------Ask a question------------------------------------------------------------>

<ng-template #postQuestionModal>
    <form action="/action_page.php" class="needs-validation" novalidate>
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Ask a Question</h5>
            </div>

            <div class="modal-body">
                <div class="card shadow-none">
                    <div class="row">
                        <div class="col-12">
                            <form [formGroup]="discussionListQuestionForm">
                                <div class="form">
                                    <div class="form-group">
                                        <label for="title">Discussion Title :</label>
                                        <input type="text" class="form-control" id="title"
                                            formControlName="discussionTitle" placeholder=""
                                            [ngClass]="{ 'is-invalid': submitQuestion && g.discussionTitle.errors }">
                                        <div *ngIf="submitQuestion && g.discussionTitle.errors"
                                            class="invalid-feedback">
                                            <div *ngIf="g.discussionTitle.errors.required">Discussion title is
                                                required</div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="title">Description :</label>
                                        <div class="w-100">
                                        </div>
                                        <angular-editor formControlName="problemDescription" [config]="editorConfig"
                                            [ngClass]="{ 'is-invalid': submitQuestion && g.problemDescription.errors }">
                                            <div *ngIf="submitQuestion && g.problemDescription.errors"
                                                class="invalid-feedback">
                                                <div *ngIf="g.problemDescription.errors.required">Problem
                                                    description is required</div>
                                            </div>
                                        </angular-editor>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-accent btn-sm text-uppercase"
                    (click)="postQuestion()">Post</button>
                <button type="button" class="btn btn-outline-accent btn-sm text-uppercase"
                    (click)="closePostQuestionModal()">Cancel</button>
            </div>
        </div>
    </form>

</ng-template>

<!---------------------------------------------------End Ask a question------------------------------------------------------------>